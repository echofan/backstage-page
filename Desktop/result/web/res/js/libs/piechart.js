define("libs/piechart",[],function(t,i,e){function n(t,i,e){var n,a;e=e||"normal";try{var s="position:absolute; left:0px; top:-20000px; padding:0px;margin:0px;border:none;white-space:pre;line-height:"+i+"px;font-family:"+t+"; font-size:"+i+"px; font-weight:"+e+";";if(!a){var o=document.body;a=document.createElement("span"),a.innerHTML="";var h=document.createTextNode("test");a.appendChild(h),o.appendChild(a)}a.style.display="",a.setAttribute("style",s),n=Math.round(a.offsetHeight),a.style.display="none",o.removeChild(a)}catch(r){n=Math.ceil(1.1*i)}return Math.max(n,i)}function a(t){this.options={selector:"#canvas",lineWidth:1,strokeStyle:"",fillStyle:"",autoline:20,radio:.6,per:.1,textAttr:{fontSize:12,fontWeight:"normal",fontFamily:"Helvetica Neue"},padding:10,radius:0,animateEnble:!0,type:1},$.extend(this.options,t),this.init()}var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};return a.prototype={clear:function(t,i,e,n){var a=e?e:this.width,s=n?n:this.height;this.context.clearRect(t||0,i||0,a,s)},filterData:function(t){var i=[];return t.forEach(function(t,e){t.data>0&&i.push(t)}),i},sort:function(t){return t.sort(function(t,i){return t.data<i.data?-1:t.data==i.data?0:1})},getSum:function(t){var i=0;return t.forEach(function(t,e){i+=t.data?parseFloat(t.data):0}),i},formatPercent:function(t){return t=100*(t||0),(t.toString().length>5?t.toFixed(2):t)+"%"},getTextAttr:function(t,i,e,n,a,s){e=i+e/2;var o,h=this.radius*(t<this.options.per?1:this.options.radio),r=Math.cos(e),l=Math.sin(e),d={};return d.sx=this.x+h*r,d.sy=this.y+h*l,d.textAlign="center",d.textBaseline=n.label?["bottom","top"]:["middle"],o=this.formatPercent(t),d.text=n.label?[n.label,o]:[o],t<this.options.per?(d.mx=this.x+(h+this.options.autoline)*r,d.my=this.y+(h+this.options.autoline)*l,"my"in s&&Math.abs(s.my-d.my)<2*this.LINEHEIGHT&&(d.my=d.my+2*this.LINEHEIGHT),1!==Math.abs(l)&&(d.ex=d.mx+(r>0?this.options.autoline:-this.options.autoline),d.ey=d.my),d.textAlign="left",d.strokeStyle=d.fillStyle="#999999"):d.fillStyle="#FFFFFF",d},handleData:function(t){t=this.filterData(t);var i,e,n=this,a=[],s=this.getSum(t),o=-Math.PI/4,h=2*Math.PI;return 0==s?[{}]:(t=this.sort(t),t.forEach(function(t,r){i=t.ratio?t.ratio:t.data/s,e=i*h,a.push({startAngel:o,middleAngel:o+e/2,endAngel:o+e,fillStyle:t.fillStyle,textParams:n.getTextAttr(i,o,e,t,r,r>0?a[r-1].textParams:{})}),o+=e}),1==t.length&&(a[0].textParams.sx=this.x,a[0].textParams.sy=this.y),a)},drawText:function(t){var i=this.context,e=this.options,n=e.textAttr,a=n.fontWeight+" "+n.fontSize+"px "+n.fontFamily;i.lineWidth=e.lineWidth,"mx"in t&&(i.beginPath(),i.strokeStyle=t.strokeStyle,i.moveTo(t.sx,t.sy),i.lineTo(t.mx,t.my),"ex"in t&&i.lineTo(t.ex,t.ey),i.stroke()),i.font=a,i.textAlign=t.textAlign,i.fillStyle=t.fillStyle,t.textBaseline.forEach(function(e,n){i.textBaseline=e,i.fillText(t.text[n],t.ex||t.mx||t.sx,t.ey||t.my||t.sy)})},drawSector:function(t){var i=this.context;i.beginPath(),i.arc(t.x||this.x,t.y||this.y,t.radius||this.radius,t.startAngel,t.endAngel,!1),i.lineTo(t.x||this.x,t.y||this.y),i.closePath(),i.fillStyle=t.fillStyle,i.fill()},drawPie:function(t,i){var e=this;this.clear(),t.forEach(function(t,n){e.drawSector(t),1==i&&e.drawText(t.textParams)})},linear:function(t,i,e,n){return t+e/n*i},easeInQuad:function(t,i,e,n){return e*(t/=n)*t+i},getSection:function(t,i){var e=[];t-=Math.PI/4;for(var n=0,a=i.length;n<a;n++){if(t>=i[n].startAngel&&t<=i[n].endAngel){e.push({fillStyle:i[n].fillStyle,startAngel:i[n].startAngel,endAngel:t});break}e.push(i[n])}return e},animateDrawCircle:function(t){var i=2*Math.PI,e=0,n=360,a=1e3,o=0,h=1e3/60,r=this,l=function(){var d;return e>a?void r.drawPie(t,!0):(d=r.easeInQuad(e,o,n,a),r.drawPie(r.getSection(i*d/360,t)),e+=h,void s(l))};l()},scaleDrawSector:function(t,i){var e=0,n=10,a=400,o=0,h=1e3/60,r=this,l=this.radius,d=this.radius+n;this.isInAnimating=!0;var c=function(){return r.index===i?t[i].radius=l:t[i].radius=d,r.index!==!1&&i!==r.index&&(t[r.index].radius=l),t},x=function(){var u;return o>a?(r.drawPie(c(t),!0),r.isInAnimating=!1,void(r.index=r.index!==i&&i)):(u=r.linear(e,n,o,a),r.index===i?t[i].radius=d-u:t[i].radius=l+u,r.index!==!1&&i!==r.index&&(t[r.index].radius=d-u),r.drawPie(t,!0),o+=h,void s(x))};x()},animateDrawSector:function(t,i){var e,n,a,o,h=0,r=12,l=400,d=0,c=1e3/60,x=this,u=t[i].x||this.x,f=t[i].y||this.y,m=(this.index===i?-1:1)*Math.sin(t[i].middleAngel),p=(this.index===i?-1:1)*Math.cos(t[i].middleAngel);this.index!==!1&&this.index!==i&&(e=-Math.sin(t[this.index].middleAngel),n=-Math.cos(t[this.index].middleAngel),a=t[this.index].x,o=t[this.index].y),this.isInAnimating=!0;var g=function(){var y;return d>l?(x.drawPie(t,!0),x.isInAnimating=!1,void(x.index=x.index!==i&&i)):(y=x.linear(h,r,d,l),t[i].x=u+y*p,t[i].y=f+y*m,x.index!==!1&&i!==x.index&&(t[x.index].x=a+y*n,t[x.index].y=o+y*e),x.drawPie(t,!0),d+=c,void s(g))};g()},isInWhichSection:function(t,i){var e,n,a,s=Math.sqrt(Math.pow(this.x-t,2)+Math.pow(this.y-i,2));return!(s>this.radius)&&(n=Math.acos((t-this.x)/s),e=Math.asin((i-this.y)/s),n>0&&e>0?a=n:n>0&&e<0?a=2*Math.PI-n:n<0&&e>0?a=Math.PI/2+e:n<0&&e<0&&(a=Math.PI-e),a)},tapResponse:function(t){t.preventDefault();var i,e,n=$(this.canvas).offset(),a=$(window).scrollTop(),s=(t.touches?t.touches[0].clientX:t.clientX)-n.left,o=(t.touches?t.touches[0].clientY:t.clientY)-(n.top-a),h=7*Math.PI/4;if(this.isInAnimating!==!0&&(s=(this.canvasPixelRatio?this.canvasPixelRatio:1)*s,o=(this.canvasPixelRatio?this.canvasPixelRatio:1)*o,(i=this.isInWhichSection(s,o))!==!1)){for(var r=0,l=this.data.length;r<l;r++){if(h<i&&i-2*Math.PI<this.data[r].endAngel){e=r;break}if(this.data[r].startAngel<=i&&this.data[r].endAngel>=i){e=r;break}}switch(this.options.type){case 1:this.scaleDrawSector(this.data.concat([]),e);break;case 2:this.animateDrawSector(this.data.concat([]),e)}}},draw:function(t){this.data=t=this.handleData(t);var i=(this.context,this.options);_this=this,this.clear(),i.animateEnble?this.animateDrawCircle(t):t.forEach(function(t,i){_this.drawSector(t),_this.drawText(t.textParams)})},setPixelRatio:function(){window.devicePixelRatio||1,this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1;this.canvasPixelRatio=1},setSize:function(){var t=$(this.canvas),i=t.css("width"),e=t.css("height"),n=this.canvasPixelRatio;i=i?parseFloat(i.replace("px","")||0):t.parent().width(),e=e?parseFloat(e.replace("px","")||0):t.parent().height(),"scale"in this.context&&this.context.scale(n,n),this.width=this.canvas.width=i*n,this.height=this.canvas.height=e*n,this.canvas.style.width=i+"px",this.canvas.style.height=e+"px"},initParams:function(){var t=this.options,i=t.textAttr;this.setPixelRatio(),this.setSize(),this.LINEHEIGHT=n(i.fontFamily,i.fontSize,i.fontWeight),this.x=parseInt(this.width/2),this.y=parseInt(this.height/2),this.radius=t.radius||(Math.min(this.width,this.height)-2*t.padding)/2,this.index=!1},init:function(){var t,i=this.options;t=this.canvas=$(i.selector)[0],t&&(this.context=t.getContext("2d"),this.initParams(),t.addEventListener("click",$.proxy(this.tapResponse,this),!1))}},a});