define("libs/pie",[],function(t,i,e){var h=function(t){this.defs={selector:"#canvas",r:150,data:null},this.extend(t,this.defs),this.init()};return h.prototype={extend:function(t,i){for(src in t)i[src]=t[src];return i},resetCanvas:function(t,i){this.canvas.style.width=t+"px",this.canvas.style.height=i+"px"},getTotal:function(t){if(t){for(var i=0,e=0;e<t.length;e++)i+=t[e].amount;return i}},getPieData:function(){var t,i,e,h,n=this.defs.r,s=this.defs.data,a=(this.getTotal(s),-Math.PI/2),r=0,l=["#2196F3","#9B58B5","#FF8806","#2196F3","#9B58B5","#FF8806","#2196F3","#9B58B5","#FF8806","#2196F3","#9B58B5","#FF8806","#2196F3","#9B58B5","#FF8806","#2196F3","#9B58B5","#FF8806"];if(s){for(var c=0;c<s.length;c++)r=a+s[c].percent*Math.PI,a+=2*s[c].percent*Math.PI,t=1.05*n*Math.cos(r),i=1.05*n*Math.sin(r),e=3*n/2*Math.cos(r),h=3*n/2*Math.sin(r),s[c].fillStyle=l[c],s[c].linePoint=[{x:t,y:i},{x:e,y:h}];return s}},drawCircle:function(){for(var t=this.ctx,i=this.getPieData(),e=this.defs.r,h=endArc=-Math.PI/2,n=0;n<i.length;n++)endArc+=2*Math.PI*i[n].percent,t.beginPath(),t.arc(this.width/2,this.height/2,e,h,endArc,!1),t.lineTo(this.width/2,this.height/2,150),t.fillStyle=i[n].fillStyle,t.fill(),t.closePath(),this.drawLines(t,i[n].linePoint,i[n].label,i[n].percent),h=endArc},fillText:function(t,i,e,h){t.font="24px Georgia",t.fillStyle="#666",t.fillText(h,i,e)},drawLines:function(t,i,e,h){var n=this.width/2,s=this.height/2,a=0,r=10,l=(100*h).toFixed(2)+"%";t.lineWidth=1,t.strokeStyle="#666",t.beginPath(),t.moveTo(n+i[0].x,s+i[0].y),t.lineTo(n+i[1].x,s+i[1].y),t.stroke(),i[0].x>0?a=100:i[0].x<0&&(r-=100,a=-100),t.lineTo(n+i[1].x+a,s+i[1].y),t.stroke(),t.closePath(),this.fillText(t,n+i[1].x+r,s+i[1].y-15,e),this.fillText(t,n+i[1].x+r,s+i[1].y+20,l)},init:function(){this.canvas=document.querySelector(this.defs.selector),this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.resetCanvas(this.width/2,this.height/2),this.drawCircle()}},h});